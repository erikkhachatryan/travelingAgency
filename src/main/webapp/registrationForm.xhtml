<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Login Page</title>
    <script src="general.js" type="text/javascript"></script>
</h:head>
<h:body>
    <f:view>
        <h:form id="registrationFormId">
            <h:panelGroup id="userNamePanelGroupId" layout="block">
                <p:outputLabel id="userNameOutputTextId" value="User Name"/>
                <p:inputText id="userNameInputTextId" value="#{registrationForm.currentUser.Name}"
                             required="true" requiredMessage="User Name is required.">
                    <p:ajax process="@this" update="@this"/>
                </p:inputText>
                <p:message id="userNameRequiredMessageId" for="userNameInputTextId"/>
            </h:panelGroup>
            <h:panelGroup id="passwordPanelGroupId" layout="block">
                <p:outputLabel id="passwordOutputTextId" value="Password"/>
                <p:inputText id="passwordInputTextId" value="#{registrationForm.currentUser.Password}"
                             required="true" requiredMessage="Password is required." type="password">
                    <p:ajax process="@this" update="@this"/>
                </p:inputText>
                <p:message id="passwordRequiredMessageId" for="passwordInputTextId"/>
            </h:panelGroup>

            <p:message id="registrationValidationMessageId" for="registrationValidatorId"/>

            <h:inputHidden value="true" id="registrationValidatorId">
                <f:validator validatorId="registrationValidator" for="registrationValidatorId"/>
                <f:attribute name="process" value="#{not empty param[registrationButtonBinding.clientId]}"/>
                <f:attribute name="message" value="User with this User Name already exists."/>
                <f:attribute name="userName" value="#{registrationForm.currentUser.Name}"/>
                <f:attribute name="allUsers" value="#{registrationForm.users}"/>
            </h:inputHidden>

            <p:commandButton id="cancelButtonId"
                             value="Cancel"
                             process="@this"
                             update="@this"
                             actionListener="#{registrationForm.closeAction}"/>

            <p:commandButton id="registrationButtonId"
                             value="Register"
                             process="registrationFormId"
                             update="registrationFormId"
                             binding="#{registrationButtonBinding}"
                             actionListener="#{registrationForm.register}"/>
        </h:form>
    </f:view>
</h:body>
</html>